(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{280:function(s,a,t){"use strict";t.r(a);var e=t(14),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[s._v("#")]),s._v(" Docker")]),s._v(" "),a("h2",{attrs:{id:"_1、初识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、初识"}},[s._v("#")]),s._v(" 1、初识")]),s._v(" "),a("h3",{attrs:{id:"docker解决的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker解决的问题"}},[s._v("#")]),s._v(" docker解决的问题")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("docker如何解决依赖的兼容问题？")])]),s._v(" "),a("ul",[a("li",[s._v("将应用的Libs（函数库）Deps（依赖）配置与应用一起打包")]),s._v(" "),a("li",[s._v("将每个应用放到一个隔离容器去运行，避免相互干扰")])]),s._v(" "),a("img",{attrs:{src:s.$withBase("/assets/image-20230110145338066.png")}}),s._v(" "),a("blockquote",[a("p",[s._v("开发测试及操作系统环境差异如何解决？\n"),a("img",{attrs:{src:s.$withBase("/assets/image-20230110145617282-1673333780020-1.png")}})])]),s._v(" "),a("p",[s._v("Ubuntu和Centos都是基于Linux内核，只是系统应用不同、提供的函数库有差异，这就是不能跨系统的原因；")]),s._v(" "),a("ul",[a("li",[s._v("docker将用户程序和所需要的系统函数库一起打包")]),s._v(" "),a("li",[s._v("docker运行到不同操作系统时，直接基于打包的库函数，借助操作系统的Linux内核来运行")])]),s._v(" "),a("blockquote",[a("p",[s._v("总结")])]),s._v(" "),a("ul",[a("li",[s._v("docker允许开发中将应用、函数库、配置一起打包形成可移植镜像，可以迁移到任意Linux系统")]),s._v(" "),a("li",[s._v("利用沙箱机制形成隔离容器，各个应用互不干扰")]),s._v(" "),a("li",[s._v("启动、移除十分方便")])]),s._v(" "),a("h3",{attrs:{id:"docker和虚拟机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker和虚拟机"}},[s._v("#")]),s._v(" docker和虚拟机")]),s._v(" "),a("blockquote",[a("p",[s._v("区别在哪？\n"),a("img",{attrs:{src:s.$withBase("/assets/image-20230110151701210.png")}})])]),s._v(" "),a("ul",[a("li",[s._v("虚拟机模拟了整个操作系统，docker只封装了部分环境")]),s._v(" "),a("li",[s._v("docker是一个进程，虚拟机是操作系统中模拟出的操作系统，所以docker速度更快")])]),s._v(" "),a("h3",{attrs:{id:"镜像和容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像和容器"}},[s._v("#")]),s._v(" 镜像和容器")]),s._v(" "),a("blockquote",[a("p",[s._v("镜像")])]),s._v(" "),a("p",[s._v("镜像就是docker将应用程序及函数库、依赖、环境等配置打包在一起，称为镜像")]),s._v(" "),a("blockquote",[a("p",[s._v("容器")])]),s._v(" "),a("p",[s._v("镜像中的程序运行起来就是容器，docker将其隔离，对外不可见")]),s._v(" "),a("blockquote",[a("p",[s._v("docker和dockerHub")])]),s._v(" "),a("p",[s._v("dockerHub是一个托管平台，类似的阿里云")]),s._v(" "),a("h3",{attrs:{id:"安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[s._v("#")]),s._v(" 安装docker")]),s._v(" "),a("blockquote",[a("p",[s._v("安装yum工具")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" yum-utils "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n           device-mapper-persistent-data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n           lvm2 --skip-broken\n")])])]),a("blockquote",[a("p",[s._v("设置阿里镜像源")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置docker镜像源")]),s._v("\nyum-config-manager "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --add-repo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n    \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/download.docker.com/mirrors.aliyun.com\\/docker-ce/g'")]),s._v(" /etc/yum.repos.d/docker-ce.repo\n\nyum makecache fast\n")])])]),a("blockquote",[a("p",[s._v("安装docker社区版")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" docker-ce\n")])])]),a("blockquote",[a("p",[s._v("启动docker")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("systemctl start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动docker服务")]),s._v("\n\nsystemctl stop "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止docker服务")]),s._v("\n\nsystemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启docker服务")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("查看版本\n"),a("img",{attrs:{src:s.$withBase("/assets/image-20230110153310121.png")}})])]),s._v(" "),a("h2",{attrs:{id:"_2、基本使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、基本使用"}},[s._v("#")]),s._v(" 2、基本使用")]),s._v(" "),a("h3",{attrs:{id:"nginx举例镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx举例镜像"}},[s._v("#")]),s._v(" nginx举例镜像")]),s._v(" "),a("blockquote",[a("p",[s._v("拉取镜像")]),s._v(" "),a("p",[s._v("注：版本使用最新可以没有版本号\n"),a("img",{attrs:{src:s.$withBase("/assets/image-20230110155042293-1673337044090-3.png")}})])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull nginx\n")])])]),a("blockquote",[a("p",[s._v("查看镜像\n"),a("img",{attrs:{src:s.$withBase("/assets/image-20230110155241106.png")}})])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\n")])])]),a("blockquote",[a("p",[s._v("删除镜像")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi nginx\n")])])]),a("img",{attrs:{src:s.$withBase("/assets/image-20230110155634278.png")}}),s._v(" "),a("blockquote",[a("p",[s._v("保存镜像\n"),a("img",{attrs:{src:s.$withBase("/assets/image-20230110160255984.png")}})])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" save "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" /opt/nginx.tar nginx\n")])])]),a("blockquote",[a("p",[s._v("本地拉取镜像\n"),a("img",{attrs:{src:s.$withBase("/assets/image-20230110160556950.png")}})])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" load "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" /opt/nginx.tar\n")])])]),a("h3",{attrs:{id:"mysql举例容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql举例容器"}},[s._v("#")]),s._v(" mysql举例容器")]),s._v(" "),a("img",{attrs:{src:s.$withBase("/assetsimage-20230110163041225.png")}}),s._v(" "),a("p",[s._v("这是dockerhub给出的命令")]),s._v(" "),a("p",[s._v("我们还需指定端口、挂载的配置文件等\n"),a("img",{attrs:{src:s.$withBase("/assets/image-20230110163310966.png")}})]),s._v(" "),a("p",[s._v("官网会给出配置cnf位置\n"),a("img",{attrs:{src:s.$withBase("/assets/image-20230110163507405.png")}})]),s._v(" "),a("p",[s._v("官网还会指出data的挂载位置")]),s._v(" "),a("blockquote",[a("p",[s._v("如果你想启动其他的容器如redis，替换配置内容")]),s._v(" "),a("p",[s._v("参考官网给出所需的配置，这里以mysql举例")])]),s._v(" "),a("p",[s._v("我们创建/tmp/mysql/conf和/tmp/mysql/data")]),s._v(" "),a("p",[s._v("在conf下添加配置文件hmy.conf\n"),a("img",{attrs:{src:s.$withBase("/assets/image-20230110165221677.png")}})]),s._v(" "),a("blockquote",[a("p",[s._v("启动")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" mysql "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("333")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v(":3306 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /tmp/mysql/conf/hmy.cnf:/etc/mysql/conf.d/hmy.cnf "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /tmp/mysql/data:/var/lib/mysql "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" mysql:8.0\n")])])]),a("blockquote",[a("p",[s._v("重启")])]),s._v(" "),a("p",[s._v("docker stop 容器id")]),s._v(" "),a("blockquote",[a("p",[s._v("关闭")])]),s._v(" "),a("p",[s._v("docker restart 容器id")]),s._v(" "),a("h3",{attrs:{id:"数据卷volume"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据卷volume"}},[s._v("#")]),s._v(" 数据卷volume")]),s._v(" "),a("ul",[a("li",[s._v("数据卷是一个虚拟目录，指向宿主机文件系统的某个目录，在宿主机修改，容器内配置随之改变")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看volume列表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume inspect es-data"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看挂载位置")]),s._v("\n")])])]),a("img",{attrs:{src:s.$withBase("/assets/image-20230110161840807.png")}}),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create html "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" html "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除html")]),s._v("\n")])])]),a("img",{attrs:{src:s.$withBase("/assets/image-20230110162512547.png")}}),s._v(" "),a("h3",{attrs:{id:"自定义镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义镜像"}},[s._v("#")]),s._v(" 自定义镜像")]),s._v(" "),a("h3",{attrs:{id:"dockercompose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockercompose"}},[s._v("#")]),s._v(" DockerCompose")])])}),[],!1,null,null,null);a.default=r.exports}}]);